---
import type { HTMLAttributes } from "astro/types";
import { cn } from "@utils/cn";
import { cva, type VariantProps } from "class-variance-authority";

const card = cva(
  "border-4 border-black shadow-[8px_8px_0_0_rgba(0,0,0,1)] p-6 rounded-xl",
  {
    variants: {
      variant: {
        primary: "bg-primary text-primary-foreground",
        secondary: "bg-secondary text-secondary-foreground",
        accent: "bg-accent text-accent-foreground",
        card: "bg-card text-card-foreground",
        destructive: "bg-destructive text-destructive-foreground",
        muted: "bg-muted text-muted-foreground",
      },
    },
  }
);

interface Props extends HTMLAttributes<"div">, VariantProps<typeof card> {
  title?: string;
  titleClass?: string;
  footerClass?: string;
}

const {
  title,
  variant = "primary",
  titleClass,
  footerClass,
  class: className,
  ...rest
} = Astro.props;
---

<div
  {...rest}
  class={cn(card({ variant }), className)}>
  {
    title && (
      <span class={cn("text-xl font-bold mb-4 border-b-2 block", titleClass)}>
        {title}
      </span>
    )
  }

  <slot />
  <div class={cn("flex justify-end", footerClass)}>
    <slot name="footer" />
  </div>
</div>
